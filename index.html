<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>자주 틀리는 문제 - 숙제 풀이 패드</title>
  <link rel="stylesheet" href="style.css">
</head>
  
<body>
  <div class="container">
    <h1>자주 틀리는 문제 (숙제용)</h1>
    <div class="student-info">
      <label for="studentName">이름: </label>
      <input type="text" id="studentName" placeholder="이름을 입력하세요">
    </div>
    <form id="problemsForm">
      <!-- 6 problems -->
      <div class="problems">
        <!-- 문제 반복 -->
        <div class="problem" data-problem="1">
          <img src="problem1.png" alt="문제 1" class="problem-img">
          <label>정답: <input type="text" class="answer"></label>
          <div class="pad-label">풀이 패드(그림판):</div>
          <canvas class="drawpad" width="600" height="300"></canvas>
          <button type="button" class="clear-pad">그림판 지우기</button>
        </div>
        <div class="problem" data-problem="2">
          <img src="problem2.png" alt="문제 2" class="problem-img">
          <label>정답: <input type="text" class="answer"></label>
          <div class="pad-label">풀이 패드(그림판):</div>
          <canvas class="drawpad" width="600" height="300"></canvas>
          <button type="button" class="clear-pad">그림판 지우기</button>
        </div>
        <div class="problem" data-problem="3">
          <img src="problem3.png" alt="문제 3" class="problem-img">
          <label>정답: <input type="text" class="answer"></label>
          <div class="pad-label">풀이 패드(그림판):</div>
          <canvas class="drawpad" width="600" height="300"></canvas>
          <button type="button" class="clear-pad">그림판 지우기</button>
        </div>
        <div class="problem" data-problem="4">
          <img src="problem4.png" alt="문제 4" class="problem-img">
          <label>정답: <input type="text" class="answer"></label>
          <div class="pad-label">풀이 패드(그림판):</div>
          <canvas class="drawpad" width="600" height="300"></canvas>
          <button type="button" class="clear-pad">그림판 지우기</button>
        </div>
        <div class="problem" data-problem="5">
          <img src="problem5.png" alt="문제 5" class="problem-img">
          <label>정답: <input type="text" class="answer"></label>
          <div class="pad-label">풀이 패드(그림판):</div>
          <canvas class="drawpad" width="600" height="300"></canvas>
          <button type="button" class="clear-pad">그림판 지우기</button>
        </div>
        <div class="problem" data-problem="6">
          <img src="problem6.png" alt="문제 6" class="problem-img">
          <label>정답: <input type="text" class="answer"></label>
          <div class="pad-label">풀이 패드(그림판):</div>
          <canvas class="drawpad" width="600" height="300"></canvas>
          <button type="button" class="clear-pad">그림판 지우기</button>
        </div>
      </div>
     

       
  <textarea id="answerTextarea" placeholder="풀이 입력"></textarea>
       <button type="submit" class="save-btn">저장하기</button>
      
    </form>
    <div id="saveStatus"></div>
  </div>



  <script type="module" src="script.js"></script>

  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  // ① Supabase 연결 정보
  const supabaseUrl = 'https://gthpeppdugkodczaszbb.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0aHBlcHBkdWdrb2RjemFzemJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5MTY3NTgsImV4cCI6MjA2NjQ5Mjc1OH0.tlXK4q9GHrdrs59X474iftcRyQqQWfVWd48W25lbI0A';
  const supabase = createClient(supabaseUrl, supabaseKey);

  // ② 제출 함수
  async function saveToSupabase() {
    const studentName = document.getElementById("studentName").value.trim();
    const answerText = document.getElementById("answerTextarea").value.trim();

    if (!studentName || !answerText) {
      alert("이름과 답안을 모두 입력해주세요.");
      return;
    }

    const { data, error } = await supabase
      .from("problem")  // 👈 Supabase에 만든 테이블 이름
      .insert([{ name: studentName, answer: answerText }]);

    if (error) {
      alert("❌ 저장 실패: " + error.message);
    } else {
      alert("✅ 저장 완료!");
      document.getElementById("studentName").value = '';
      document.getElementById("answerTextarea").value = '';
    }
  }

  // ③ 버튼 클릭 시 실행
  document.getElementById("submitButton").addEventListener("click", (e) => {
    e.preventDefault();
    saveToSupabase();
  });
</script>
</body>
</html> 
